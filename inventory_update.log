2025-07-23 19:33:21,069 - __main__ - INFO - ============================================================
2025-07-23 19:33:21,069 - __main__ - INFO - STARTING INVENTORY UPDATE AUTOMATION
2025-07-23 19:33:21,069 - __main__ - INFO - ============================================================
2025-07-23 19:33:21,069 - __main__ - INFO - Step 1: Checking for Dropbox file updates...
2025-07-23 19:33:21,358 - dropbox_handler - INFO - Successfully refreshed Dropbox access token
2025-07-23 19:33:21,361 - dropbox - INFO - Request to users/get_current_account
2025-07-23 19:33:22,131 - dropbox - INFO - Request to users/get_current_account
2025-07-23 19:33:22,815 - dropbox_handler - INFO - Connected to Dropbox account: [EMAIL_REDACTED]
2025-07-23 19:33:22,816 - dropbox - INFO - Request to users/get_current_account
2025-07-23 19:33:25,119 - dropbox_handler - INFO - Checking Dropbox folder: [FOLDER_PATH_REDACTED]
2025-07-23 19:33:25,120 - dropbox - INFO - Request to files/list_folder
2025-07-23 19:33:25,616 - dropbox_handler - INFO - Found [COUNT_REDACTED] stock files, most recent: [FILENAME_REDACTED]
2025-07-23 19:33:25,617 - dropbox_handler - INFO - Processing most recent stock file: [FILENAME_REDACTED]
2025-07-23 19:33:25,618 - dropbox_handler - INFO - Downloading file: [FILENAME_REDACTED]
2025-07-23 19:33:25,619 - dropbox - INFO - Request to files/download
2025-07-23 19:33:26,406 - dropbox_handler - INFO - Downloaded file to: [TEMP_FILE_PATH_REDACTED]
2025-07-23 19:33:26,408 - dropbox_handler - INFO - Downloaded [COUNT_REDACTED] stock file(s)
2025-07-23 19:33:26,411 - __main__ - INFO - Found 1 files from Dropbox
2025-07-23 19:33:26,412 - __main__ - INFO - Total files to process: 1
2025-07-23 19:33:26,412 - __main__ - INFO -   - [TEMP_FILE_PATH_REDACTED]
2025-07-23 19:33:26,412 - __main__ - INFO - Step 2: Processing inventory updates with robust Conway category logic...
2025-07-23 19:33:26,413 - inventory_updater - INFO - Retrieving Conway category variant SKUs from Holded...
2025-07-23 19:33:26,413 - holded_api - INFO - Fetching Conway category products page 1
2025-07-23 19:33:27,030 - holded_api - INFO - Fetching Conway category products page 2
2025-07-23 19:33:27,102 - holded_api - INFO - Retrieved [COUNT_REDACTED] Conway category products
2025-07-23 19:33:27,102 - holded_api - INFO - Found [COUNT_REDACTED] Conway variant SKUs
2025-07-23 19:33:27,103 - inventory_updater - INFO - Found [COUNT_REDACTED] Conway variant SKUs in Holded
2025-07-23 19:33:27,103 - inventory_updater - INFO - Processing stock file: [TEMP_FILE_PATH_REDACTED]
2025-07-23 19:33:27,192 - file_processor - INFO - Successfully read Excel file
2025-07-23 19:33:27,192 - file_processor - INFO - Column mappings - [COLUMN_MAPPING_REDACTED]: item, Price: evp, Offer: None, Stock: stock qty
2025-07-23 19:33:27,193 - file_processor - INFO - [PRODUCT_COUNT_REDACTED] products from file
2025-07-23 19:33:27,193 - file_processor - INFO - [PRODUCT_COUNT_REDACTED] products from file: [FILENAME_REDACTED]
2025-07-23 19:33:27,193 - file_processor - INFO - [PRODUCT_COUNT_REDACTED] products out of 4
2025-07-23 19:33:27,194 - inventory_updater - INFO - Extracted [COUNT_REDACTED] SKUs from file
2025-07-23 19:33:27,194 - inventory_updater - INFO - [PRODUCT_COUNT_REDACTED] products in stock files
2025-07-23 19:33:27,194 - inventory_updater - INFO - Scenario 1: Conway SKUs not in stock list - setting to 0
2025-07-23 19:33:27,194 - inventory_updater - INFO - Scenario 2: SKUs in both Conway and stock list - checking for updates
2025-07-23 19:33:27,194 - holded_api - INFO - Updating VARIANT stock [VARIANT_ID_REDACTED]: [STOCK_FROM_REDACTED] -> [STOCK_TO_REDACTED] (difference: [STOCK_DIFF_REDACTED])
2025-07-23 19:33:27,472 - holded_api - INFO - Successfully updated stock for variant [VARIANT_ID_REDACTED]
2025-07-23 19:33:27,472 - inventory_updater - INFO - Updated stock for SKU [SKU_REDACTED]: [STOCK_FROM_REDACTED] -> [STOCK_TO_REDACTED]
2025-07-23 19:33:27,473 - holded_api - INFO - Updating VARIANT stock [VARIANT_ID_REDACTED]: [STOCK_FROM_REDACTED] -> [STOCK_TO_REDACTED] (difference: [STOCK_DIFF_REDACTED])
2025-07-23 19:33:27,749 - holded_api - INFO - Successfully updated stock for variant [VARIANT_ID_REDACTED]
2025-07-23 19:33:27,750 - inventory_updater - INFO - Updated stock for SKU [SKU_REDACTED]: [STOCK_FROM_REDACTED] -> [STOCK_TO_REDACTED]
2025-07-23 19:33:27,750 - holded_api - INFO - Updating VARIANT stock [VARIANT_ID_REDACTED]: [STOCK_FROM_REDACTED] -> [STOCK_TO_REDACTED] (difference: [STOCK_DIFF_REDACTED])
2025-07-23 19:33:28,009 - holded_api - INFO - Successfully updated stock for variant [VARIANT_ID_REDACTED]
2025-07-23 19:33:28,010 - inventory_updater - INFO - Updated stock for SKU [SKU_REDACTED]: [STOCK_FROM_REDACTED] -> [STOCK_TO_REDACTED]
2025-07-23 19:33:28,010 - holded_api - INFO - Updating VARIANT stock [VARIANT_ID_REDACTED]: [STOCK_FROM_REDACTED] -> [STOCK_TO_REDACTED] (difference: [STOCK_DIFF_REDACTED])
2025-07-23 19:33:28,272 - holded_api - INFO - Successfully updated stock for variant [VARIANT_ID_REDACTED]
2025-07-23 19:33:28,272 - inventory_updater - INFO - Updated stock for SKU [SKU_REDACTED]: [STOCK_FROM_REDACTED] -> [STOCK_TO_REDACTED]
2025-07-23 19:33:28,273 - inventory_updater - INFO - Scenario 3: SKUs in stock list but not in Conway - skipping
2025-07-23 19:33:28,273 - inventory_updater - INFO - SCENARIO SUMMARY:
2025-07-23 19:33:28,274 - inventory_updater - INFO -   Conway SKUs reset to 0: [COUNT_REDACTED]
2025-07-23 19:33:28,274 - inventory_updater - INFO -   Stock updates applied: [COUNT_REDACTED]
2025-07-23 19:33:28,274 - inventory_updater - INFO -   Non-Conway SKUs skipped: [COUNT_REDACTED]
2025-07-23 19:33:28,274 - inventory_updater - INFO -   Errors encountered: 0
2025-07-23 19:33:28,277 - __main__ - INFO - UPDATE SUMMARY:
2025-07-23 19:33:28,277 - __main__ - INFO -   Files processed: 1
2025-07-23 19:33:28,277 - __main__ - INFO -   Products processed: 4
2025-07-23 19:33:28,277 - __main__ - INFO -   Stock updates: 4
2025-07-23 19:33:28,277 - __main__ - INFO -   Stock resets (Conway SKUs not in files): 0
2025-07-23 19:33:28,278 - __main__ - INFO -   SKUs skipped (not Conway): 0
2025-07-23 19:33:28,278 - __main__ - INFO -   Errors: 0
2025-07-23 19:33:28,278 - __main__ - INFO - Step 3: Sending notification email...
2025-07-23 19:33:28,279 - email_notifier - INFO - Conectando al servidor SMTP: [SMTP_SERVER_REDACTED]
2025-07-23 19:33:28,792 - email_notifier - INFO - Email enviado exitosamente
2025-07-23 19:33:28,832 - email_notifier - INFO - Email de confirmación de actualización enviado exitosamente
2025-07-23 19:33:28,833 - __main__ - INFO - Notification email sent successfully
2025-07-23 19:33:28,833 - __main__ - INFO - Step 4: Cleaning up temporary files...
2025-07-23 19:33:28,833 - __main__ - INFO - ============================================================
2025-07-23 19:33:28,834 - __main__ - INFO - INVENTORY UPDATE AUTOMATION COMPLETED
2025-07-23 19:33:28,834 - __main__ - INFO - ============================================================
